<html>
    
<head>
<title>Camera Preview</title>
<style>
body,input,option,select {
    font-family: sans-serif;
    font-size: 100px;
    margin-bottom: 10px;
}
input {
    border-style: solid;
    border-width: 10px;
    border-color: black;
}
    
</style>
</head>

<body>
<center>
    <img id="preview" width=400 height=225/><br/>
    <form method="POST">
    <input type="submit" style="background:#11ff11;" name="BTN" value="SETUP"/>
    </form>
</center>    
    
<script>
     // call back when browser window is closed
    window.onclose = ws_close;

    // instatiate and open websocket
    var ws = new WebSocket("ws://"+location.host+"/camera_ws");
    
    // close the socket
    function ws_close() {
        if (ws.readyState == WebSocket.OPEN) {
            ws.close()
        }
    }

    // handler for receiving messages
    ws.onmessage = function (messageEvent) {
        preview.src = "data:image/jpeg;base64," + messageEvent.data;
    }
</script>
    
</body>
</html>
